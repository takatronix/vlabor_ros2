profile:
  name: so101_dual_teleop
  description: "Dual-arm teleop (leader->follower) + overhead camera"
  actions:
    - type: include
      package: fv_camera
      launch: fv_camera_launch.py
      args:
        node_name: overhead_camera
        config_file: ${overhead_camera_config}
    - type: include
      package: lerobot_recorder
      launch: episode_recorder.launch.py
      args:
        preset: so101_dual_leader
    - type: node
      package: unity_robot_control
      executable: joint_state_mirror_node
      name: joint_state_mirror_dual
      parameters:
        config_file: ${mirror_dual_config}
    - type: include
      package: unity_robot_control
      launch: vr_dual_arm_teleop_robot_only.launch.py
      args:
        left_serial_port: ${left_serial_port}
        right_serial_port: ${right_serial_port}
        driver_backend: ${driver_backend}
        auto_enable: ${auto_enable}
        gripper_scale: ${gripper_scale}
        left_calibration_path: ${left_calibration_path}
        right_calibration_path: ${right_calibration_path}
      omit_empty_args:
        - left_calibration_path
        - right_calibration_path
    - type: node
      package: unity_robot_control
      executable: so101_webui_node
      name: so101_webui_left
      parameters:
        web_port: ${left_webui_port}
        arm_namespaces: [left_arm]
    - type: node
      package: unity_robot_control
      executable: so101_webui_node
      name: so101_webui_right
      parameters:
        web_port: ${right_webui_port}
        arm_namespaces: [right_arm]
    - type: node
      package: vlabor_dashboard
      executable: vlabor_dashboard_node
      name: vlabor_dashboard
      parameters:
        web_port: ${dashboard_port}
        profile: so101_dual_teleop
        arm_namespaces: [left_arm, right_arm]
        webui_ports: ["${left_webui_port}", "${right_webui_port}"]
        camera_topics: [/overhead_camera/image_raw]
        camera_names: [overhead_camera]
    - type: include
      package: foxglove_bridge
      launch: foxglove_bridge_launch.xml
      enabled: ${enable_foxglove}
    - type: include
      package: so101_description
      launch: display.launch.py
      args:
        display_config: ${rviz_vr_config}
